# README

This repository contains code to clean and use the [Public Plans Data](https://publicplansdata.org/public-plans-database/download-full-data-set/) (PPD) data available from the Center for Retirement Research at Boston College. 

The code in this repository is based on the following papers:
1. ```
   @article{BLS2025,
   author = {Begenau, Juliane and Liang, Pauline and Siriwardane, Emil N},
   journal = {SSRN},
   title = {The Rise of Alternatives},
   year = {2025}
   }
   ```
2. ```
   @article{ABS2025,
   title={Choosing Pension Fund Investment Consultants},
   author={Andonov, Aleksandar and Bonetti, Matteo and Stefanescu, Irina},
   year={2025},
   journal={SSRN}
   }
   ```

We kindly ask that you cite these papers when using the repository.

## Overview and Sample
### Overview

The PPD data contain information on asset allocation, performance, and plan structure for U.S. public pension funds. The vast majority of U.S. public pensions provide defined benefits (DBs, as opposed to defined contributions, DCs) and the PPD data focuses solely on DB plans. The underyling source of all of the data is from comprehensive annual financial reports (CAFRs) that are filed by each U.S. public pension. CAFRs are publicly available and can generally be found on the website for a given pension plan. For example, the CAFR for CALPERS - the largest U.S. pension by assets - in the fiscal year ending in June 30, 2022 can be found [here](https://www.calpers.ca.gov/docs/forms-publications/annual-investment-report-fy-2022.pdf). 

PPD scrapes and standardizes the data contained in CAFR, most of which is contained in the *PPD: Plans* dataset. More granular asset allocation data is also contained in the *PPD: Detailed Investment Data* dataset.

All PPD data is indexed by a pension plan (`ppd_id`) and fiscal year (`fy`). Fiscal years for pension plans generally end in June, though not all plans follow that schedule. Accounting for these differences is important when comparing investment performance across plans (see below for more details).

Though the PPD data is indexed by individual plans, it is common for plans to pool their assets together before investing. For example, the [Retirement System of Alabama](https://www.rsa-al.gov/) manages the assets of the Teachers' Retirement System, the Employees' Retirement System, and the Judicial Retirement Fund. For many purposes (e.g., studying asset allocation decisions), it is therefore useful to aggregate individual plans into their larger *pension system*. This repo provides a mapping between plans and systems, while also accounting for mergers that have occurred during the sample.

There are several cases in which the PPD data do not match the underlying data in the CAFRs. These are most often not clerical errors but instead reflect how PPD aggregates across different asset classes. See below for more details.

In addition, the PPD provides the names of general investment consultants used by each system. We have also hand-collected data on consultants that we use to supplement and cross-check the PPD.


### Sample Period

The repo is designed for the [2023-07-28 release](https://publicplansdata.org/public-plans-database/download-full-data-set/previous-version-downloads/) of the PPD, which contains data for all sampled pensions through the 2022 fiscal year. The PPD is sparse before FY2001, so we focus on the period of FY2001-2022. 


## Running the code

Stata is required to use this repo. The final output is generated by opening Stata and running the contents of:
```
{root}/run_all.do
```
The final output is ``ppd_plan_level_clean.dta``, which contains the raw PPD data, plus:
1. Mappings from plans to systems in each year (variable ``pub_id``) and to identifiers used by Preqin (variable ``preqin_id``). These are potentially many-to-one. The Preqin dataset provides information on retirement system investments in private markets, such as buyout, venture capital, infrastructure, and real estate funds.
2. Mappings from plans to systems in each year (variable ``pub_id``) and to identifiers used by Thomson-Reuters Institutional Holdings (13F) Database (variables ``tr13fid1`` ``tr13fid2`` ``tr13fid3`` ``tr13fid4``). These are potentially many-to-one (in one case many-to-many). For a subset of retirement systems that invest _directly_ (not through external asset managers) in U.S. equities, the 13F dataset provides information on their direct U.S. equity holdings.
3. Adjustments to [asset allocations](#adjusting-asset-allocations)
4. [Consultants](#consultants) for each system-year. The name of the general consultant is in the variable ``consultant_final`` and a unique identifier for each consultant is contained in ``consultant_id_final``.
5. Net-of-fee [returns](#adjusting-performance) based on investment income, expenses, and capital gains from CAFRs


## Adjusting Asset Allocations

As mentioned above, there are several cases in which the PPD data do not match the underlying data in the CAFRs. We make adjustments in these cases in ``code/adjust_allocations``. The file ``raw/allocation_adjustments/allocation_adjustments_summary`` groups adjustments into four categories. 
1. Adjust category definition. For example, in the PPD data, the Alabama Employees' Retirement System's 2017 target allocation to fixed income includes fixed income, real estate, and miscellaneous alternatives. So, consistent with the Alabama ERS 2017 CAFR, we separate the target allocation into these three asset classes.
2. Correct mismatches between the PPD data and CAFRs. For example, in the PPD data, the 2003 target allocation to equity for the Minnesota Teachers Retirement Association is 0.62708, whereas in the CAFR, it is 0.6. So, we set the allocation to 0.6. 
3. Fill in missing data. For instance, the Municipal Employees' Retirement System of Michigan is missing target and actual allocations in the PPD data in 2004. So, we manually collect this information from the 2004 CAFR.
4. Change leverage to negative allocation. PPD does not classify the use of leverage by pension funds as a negative allocation to cash. For example, the San Diego County Employees Retirement Association shows a zero actual allocation to cash in 2012 in the PPD data. However, based on the 2012 CAFR, it should be -0.25. So, we set the allocation to -0.25.

We also create a flag, ``trgt_zero_actl_nonzero``, for plan-year observations in which any asset class (excluding Cash and Other) has a zero target allocation and nonzero actual allocation. For example, this flag helps identify plans like the Public Employee Retirement System of Idaho (PERSI), which includes private equity in its general "equity target". In the PPD, this results in the target share of public equities reflecting both public and private equity, while in most years the target share of private equity is recorded as zero (even though actual shares report the true allocation). Researchers can decide how they want to handle such cases.


## Adjusting Performance

In terms of performance, the ``InvestmentReturn_1yr`` variable in the PPD dataset provides returns in percentage points but this variable does not distinguish between gross and net returns. We suggest using an alternative performance measure (variable ``ret_bgnassets``) that always reflects net performance. This measure estimates the net return as a ratio of the pension fund's net investment income to total assets at the beginning of the year. The information on net investment income and assets is disclosed in the financial statements in the pension funds' annual reports and is collected by the PPD dataset. Net investment income includes changes in the value of assets (capital gains), dividends, interest payments, investment expenses in all asset classes, and security lending income and fees. 

We manually verify that the largest differences between the PPD ``InvestmentReturn_1yr`` and our ``ret_bgnassets`` variables are among pension funds disclosing gross percentage returns in their annual reports. Our estimate is that approximately 25% of the ``InvestmentReturn_1yr`` observations are gross returns. The list below provides five examples of pension funds that have an ``InvestmentReturn_1yr`` that is on average more than 50 basis points higher than the ``ret_bgnassets`` measure as well as the confirmation that the difference is due to reporting percentage returns gross of fees:
   - Contra Costa County Employees Retirement Association (example confirming gross reporting in 2015 CAFR p.11  “For the year ended December 31, 2015, CCCERA’s investment portfolio returned 2.6%, before investment management fees.”)
   - Public School Teachers Pension and Retirement Fund of Chicago (example confirming gross reporting in 2015 CAFR p.54  “Within this environment the Fund returned 3.27% net-of-fees (3.54% gross-of-fees) during the one-year period ended June 30, 2015.” 3.5% is collected in PPD.)
   - Teachers Retirement System of Louisiana (example confirming gross reporting in 2015 CAFR p.26 “The market rate of return on the System’s investments was 3.1% (gross of fees) for 2015.”)
   - Massachusetts Pension Reserves Investment Management Board (example confirming gross reporting in 2015 CAFR p.63 “PRIT Core returns (gross of fees) and benchmarks for the periods ended June 30, 2015.”)
   - Ohio Police and Fire Pension Fund (example confirming gross reporting in 2015 CAFR p.54 “For calendar year 2015, the total portfolio’s investment return was 0.65 percent gross of fees”)

When analyzing performance, it is important to account for differences in fiscal-year-end dates across pension funds. Using only year-fixed effects is insufficient as it will not capture differences in the timing of the reported returns within the year. For instance, pension funds disclosing returns at the end of June reported an average return of -4.5% in 2008, while pension funds disclosing returns at the end of December reported an average return of -24.3% in 2008. The variable ``pfmonth`` presents the reporting month on a retirement system level. Around 65% of the pension funds disclose returns at the end of June and 24% at the end of December. The remaining pension funds are disclosing returns in March (e.g., New York State Common Retirement Fund), April (e.g., City of Kansas City Missouri Retirement System), August (e.g., Teacher Retirement System of Texas and Employees Retirement System of Texas), and September (e.g., Retirement Systems of Alabama and Michigan Department of Treasury).


## General Consultants

The data provides information on the general consultants advising pension funds. Pension funds can also hire specialized consultants, but they are not part of the current data coverage.

There have been several mergers and name changes during our sample (FY2001-2022). In the event of a merger or acquisition, we use the new name of the consultancy for all fiscal years after the M&A event. In the event of the name change, we use the latest name of the consultancy for the entire sample. 

